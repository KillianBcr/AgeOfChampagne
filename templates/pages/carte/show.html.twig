{% extends 'base.html.twig' %}
{% block title %}{{ carte.name }}{% endblock %}

{% block body %}
    <link rel="stylesheet" href="../style.css">
    <div class="contentUl">
        <h1 class="titleform">{{ carte.name }}</h1>
        <dl>
                <img src="{{ vich_uploader_asset(carte, 'imageFile') }}" onclick="displayMap()"/>

            <dt>Description</dt>
            <dd>{{ carte.description|raw }}</dd>
            <dt>Cépage</dt>
            <dd>{{ carte.cepage.name ?? 'Aucune'  }}</dd>

            <dt>Crus</dt>
            <dd>{{ carte.crus.nom ?? 'Aucune'  }}</dd>
        </dl>
    </div>

    <div id="mapContainer">
        <div class="map">
            <div id="map"></div>
            <img src="https://cdn-icons-png.flaticon.com/512/561/561189.png" alt="fermer" onclick="displayMap()"/>
        </div>
    </div>
    <?php echo "123442" ?>
    <script>
        function displayMap() {
            let mapContainer = document.getElementById('mapContainer');
            mapContainer.classList.toggle('mapContainerVisible');
        }
    </script>

    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
            integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
            crossorigin=""></script>

    <script type="text/javascript">
        {#let lat2 = {{ carte.latitude|json_encode() }};#}
        {#let lon2 = {{ carte.longitude|json_encode() }};#}

        let lat = 49.06001;
        let lon = 4.2188;
        let zoom = 10;
        let myMap = null;


        function initMap() {
            myMap = L.map('map').setView([lat, lon], zoom);

            L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                // Il est toujours bien de laisser le lien vers la source des données
                attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
                minZoom: 1,
                maxZoom: 20
            }).addTo(myMap);

            L.marker([lat, lon]).addTo(myMap);
        }

        window.onload = function () {
            initMap();
        };
    </script>

{% endblock %}